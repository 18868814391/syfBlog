window.__require=function t(e,o,i){function n(s,r){if(!o[s]){if(!e[s]){var a=s.split("/");if(a=a[a.length-1],!e[a]){var h="function"==typeof __require&&__require;if(!r&&h)return h(a,!0);if(c)return c(a,!0);throw new Error("Cannot find module '"+s+"'")}}var d=o[s]={exports:{}};e[s][0].call(d.exports,function(t){return n(e[s][1][t]||t)},d,d.exports,t,e,o,i)}return o[s].exports}for(var c="function"==typeof __require&&__require,s=0;s<i.length;s++)n(i[s]);return n}({block:[function(t,e,o){"use strict";cc._RF.push(e,"0647e3YYnRPfaCtUH8oG9Cu","block"),cc.Class({extends:cc.Component,properties:{},start:function(){this.mid=this.node.getChildByName("mid"),this.up=this.node.getChildByName("up"),this.down=this.node.getChildByName("down"),this.left=this.node.getChildByName("left"),this.right=this.node.getChildByName("right")},psub:function(t,e){return this.startPoint=cc.v2(t.x,t.y),this.endPoint=cc.v2(e.x,e.y),this.endPoint.sub(this.startPoint)},plen:function(t){return t.mag()},is_jump_on_block:function(t,e){var o=this.mid.convertToWorldSpaceAR(cc.p(0,0)),i=this.psub(t,o),n=this.plen(i),c=o;if(1===e){var s=this.up.convertToWorldSpaceAR(cc.p(0,0));i=this.psub(t,s),n>(h=this.plen(i))&&(n=h,c=s);var r=this.down.convertToWorldSpaceAR(cc.p(0,0));i=this.psub(t,r),n>(h=this.plen(i))&&(n=h,c=r)}else{var a=this.left.convertToWorldSpaceAR(cc.p(0,0));i=this.psub(t,a),n>(h=this.plen(i))&&(n=h,c=a);var h,d=this.right.convertToWorldSpaceAR(cc.p(0,0));i=this.psub(t,d),n>(h=this.plen(i))&&(n=h,c=d)}return i=this.psub(t,c),this.plen(i)<100&&(t.x=c.x,t.y=c.y,!0)}}),cc._RF.pop()},{}],game_scene:[function(t,e,o){"use strict";cc._RF.push(e,"b8b6asJzotDBJESC5YwQEuV","game_scene"),cc.Class({extends:cc.Component,properties:{scoreLabel:cc.Label,player:{type:cc.Node,default:null},block_prefab:{default:[],type:cc.Prefab},block_root:{type:cc.Node,default:null},left_org:cc.p(0,0),map_root:{type:cc.Node,default:null},y_radio:.55,checkout:{type:cc.Node,default:null}},incrScore:function(t){this.score+=t,this.scoreLabel.string=this.score},onLoad:function(){this.score=0},start:function(){this.cur_block=cc.instantiate(this.block_prefab[Math.floor(3*Math.random())]),this.block_root.addChild(this.cur_block),this.cur_block.setPosition(this.block_root.convertToNodeSpaceAR(this.left_org));var t=this.cur_block.getChildByName("mid").convertToWorldSpaceAR(cc.p(0,0));this.player.setPosition(this.map_root.convertToNodeSpaceAR(t)),this.next_block=this.cur_block,this.player_com=this.player.getComponent("player"),this.block_zorder=-1,this.add_block()},add_block:function(){this.cur_block=this.next_block,this.next_block=cc.instantiate(this.block_prefab[Math.floor(3*Math.random())]),this.block_root.addChild(this.next_block),this.next_block.zIndex=this.block_zorder,this.block_zorder--;var t=200+200*Math.random(),e=t*this.y_radio,o=this.cur_block.getPosition();o.x+=t*this.player_com.direction,o.y+=e,this.next_block.setPosition(o),this.player_com.set_next_block(this.next_block.getComponent("block")),this.incrScore(1)},move_map:function(t,e){var o=cc.moveBy(.5,t,e),i=cc.callFunc(function(){this.add_block()}.bind(this)),n=cc.sequence([o,i]);this.map_root.runAction(n)},on_checkout_game:function(){this.checkout.active=!0},on_game_again:function(){cc.director.loadScene("game_scene")}}),cc._RF.pop()},{}],player:[function(t,e,o){"use strict";cc._RF.push(e,"751d6uY9GFO4YxSdNfuB6NZ","player");var i=t("game_scene");cc.Class({extends:cc.Component,properties:{init_speed:150,a_power:600,y_radio:.55,game_manager:{type:i,default:null}},onLoad:function(){this.next_block=null,this.direction=1},player_jump:function(){var t=this.x_distance*this.direction,e=this.x_distance*this.y_radio,o=this.node.getPosition();o.x+=t,o.y+=e,this.rot_node.runAction(cc.rotateBy(.5,360*this.direction));var i=this.node.parent.convertToWorldSpaceAR(o),n=!1;this.next_block.is_jump_on_block(i,this.direction)?o=this.node.parent.convertToNodeSpaceAR(i):n=!0;var c=cc.jumpTo(.5,o,200,1);this.direction=Math.random()<.5?1:-1;var s=cc.callFunc(function(){n?this.game_manager.on_checkout_game():-1===this.direction?this.game_manager.move_map(580-i.x,-e):this.game_manager.move_map(180-i.x,-e)}.bind(this)),r=cc.sequence(c,s);this.node.runAction(r)},set_next_block:function(t){this.next_block=t},start:function(){this.rot_node=this.node.getChildByName("rotate"),this.anim_node=this.rot_node.getChildByName("anim"),this.is_power_mode=!1,this.speed=0,this.x_distance=0,this.anim_node.on(cc.Node.EventType.TOUCH_START,function(t){this.is_power_mode=!0,this.x_distance=0,this.speed=this.init_speed,this.anim_node.stopAllActions(),this.anim_node.runAction(cc.scaleTo(2,1,.5))}.bind(this),this),this.anim_node.on(cc.Node.EventType.TOUCH_END,function(t){this.is_power_mode=!1,this.anim_node.stopAllActions(),this.anim_node.runAction(cc.scaleTo(.5,1,1)),this.player_jump()}.bind(this),this),this.anim_node.on(cc.Node.EventType.TOUCH_CANCEL,function(t){this.is_power_mode=!1,this.anim_node.stopAllActions(),this.anim_node.runAction(cc.scaleTo(.5,1,1)),this.player_jump()}.bind(this),this)},update:function(t){this.is_power_mode&&(this.speed+=this.a_power*t,this.x_distance+=this.speed*t)}}),cc._RF.pop()},{game_scene:"game_scene"}]},{},["block","game_scene","player"]);