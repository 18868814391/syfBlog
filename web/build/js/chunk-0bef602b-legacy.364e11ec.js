(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0bef602b"],{"04ba":function(t,n,e){var r=e("9535"),i=Math.floor,o=function(t,n){var e=t.length,u=i(e/2);return e<8?c(t,n):a(t,o(r(t,0,u),n),o(r(t,u),n),n)},c=function(t,n){var e,r,i=t.length,o=1;while(o<i){r=o,e=t[o];while(r&&n(t[r-1],e)>0)t[r]=t[--r];r!==o++&&(t[r]=e)}return t},a=function(t,n,e,r){var i=n.length,o=e.length,c=0,a=0;while(c<i||a<o)t[c+a]=c<i&&a<o?r(n[c],e[a])<=0?n[c++]:e[a++]:c<i?n[c++]:e[a++];return t};t.exports=o},"151d":function(t,n,e){"use strict";e.r(n);var r=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"layout"},[e("header",[e("span",{staticClass:"score"},[t._v("总分："+t._s(t.score))]),e("button",{staticClass:"star",on:{click:t.init}},[t._v("开始新的游戏")]),e("span",{staticClass:"sd"})]),e("div",{staticClass:"all-container"},[e("div",{staticClass:"background"},t._l(16,(function(t,n){return e("span",{key:n})})),0),e("div",{staticClass:"container"},t._l(t.rocks,(function(n,r){return e("span",{directives:[{name:"show",rawName:"v-show",value:n,expression:"e"}],key:r,staticClass:"list",style:"\n          zIndex: "+(n?n.num:0)+";\n          transform: translate("+t.cssTransition(n)+");\n        "},[e("span",{staticClass:"inner",style:"backgroundColor: "+(n?n.color:""),attrs:{id:"r"+(n&&n.id)}},[t._v(" "+t._s(n?n.num:"")+" ")])])})),0)])])},i=[],o=e("ed3b"),c=(e("e186"),e("a9b6"),e("3fab"),e("aaa2"),e("44ad"),e("a9d5"),e("28fd"),e("6249"),e("6ba1"),e("c284"),e("2690"),e("d4f9"),e("59d7"),e("8d1b"),function(t){return function(n,e){var r=n[t],i=e[t];return r<i?-1:1}}),a=function(t){return new Promise((function(n){return setTimeout(n,t)}))},u={data:function(){return{msg:"",score:0,rocks:[],color:{2:"#eee4da",4:"#ede0c8",8:"#f2b179",16:"#f59563",32:"#f67c5f",64:"#f65e3b",128:"#edcf72",256:"#edcc61",512:"#0444BF",1024:"#A79674",2048:"#282726",4096:"#280b21",8192:"#281d04"},directX:30}},mounted:function(){window.app=this,this.init(),document.addEventListener("keydown",this.arrowMove),document.addEventListener("touchstart",this.fingerMove)},destroyed:function(){document.removeEventListener("touchstart",this.fingerMove,!0),document.removeEventListener("keydown",this.arrowMove,!0)},methods:{fingerMove:function(t){var n=this,e=function e(r){r&&r.preventDefault();var i=r.touches[0].clientX-t.touches[0].clientX,o=r.touches[0].clientY-t.touches[0].clientY;i>n.directX?(n.turn("right"),document.removeEventListener("touchmove",e)):i<-n.directX?(n.turn("left"),document.removeEventListener("touchmove",e)):o>n.directX?(n.turn("down"),document.removeEventListener("touchmove",e)):o<-n.directX&&(n.turn("up"),document.removeEventListener("touchmove",e))};document.addEventListener("touchmove",e),document.addEventListener("touchend",(function(){document.removeEventListener("touchmove",e)}))},arrowMove:function(t){switch(t.key.toLocaleUpperCase()){case"ARROWRIGHT":case"D":this.turn("right");break;case"ARROWLEFT":case"A":this.turn("left");break;case"ARROWDOWN":case"S":this.turn("down");break;case"ARROWUP":case"W":this.turn("up");break}},isMobile:function(){return window.navigator.userAgent.match(/Mobile/)},cssTransition:function(t){return this.isMobile()?"".concat(23.5*(t?t.x:0),"vw, ").concat(23.5*(t?t.y:0),"vw"):"".concat(120*(t?t.x:0),"px, ").concat(120*(t?t.y:0),"px")},init:function(){this.score=0,this.initRocks()},initRocks:function(){this.rocks=[],this.add(),this.add()},random24:function(){return Math.random()>.9?4:2},random0123:function(){return~~(4*Math.random())},createRock:function(){var t=this.random24(),n={x:this.random0123(),y:this.random0123(),num:t,id:this.rocks.length+1,color:this.color[t]},e=this.getRockByPoint({x:n.x,y:n.y});return e?this.createRock():n},isGameOver:function(){var t=this,n=this.isFull()&&this.rocks.filter((function(t){return t&&(3!==t.x||3!==t.y)})).find((function(n){var e=t.getRockByPoint({x:n.x+1,y:n.y}),r=t.getRockByPoint({x:n.x,y:n.y+1});return n.num===(e&&e.num)||n.num===(r&&r.num)}));return void 0===n},isSuccess:function(){var t=this.rocks.find((function(t){return t&&8192===t.num}));return void 0!==t},isFull:function(){return this.rocks.filter((function(t){return t})).length>15},add:function(){if(this.isFull())return!1;var t=this.createRock();this.rocks.push(t)},getRockByPoint:function(t){var n=t.x,e=t.y;return this.rocks.filter((function(t){return t})).find((function(t){return t.x===n&&t.y===e}))},getIndex:function(t){return this.rocks.findIndex((function(n){return n&&n.id===t}))},handleDirect:function(t){return"right"===t?{handleArr:function(t){return t.filter((function(t){return t&&3!==t.x})).sort(c("x")).reverse()},handleCondition:function(t){return t.x<3},next:function(t){return{x:t.x+1,y:t.y}},handleMove:function(t){return t.x++}}:"left"===t?{handleArr:function(t){return t.filter((function(t){return t&&0!==t.x})).sort(c("x"))},handleCondition:function(t){return t.x>0},next:function(t){return{x:t.x-1,y:t.y}},handleMove:function(t){t.x--}}:"up"===t?{handleArr:function(t){return t.filter((function(t){return t&&0!==t.y})).sort(c("y"))},handleCondition:function(t){return t.y>0},next:function(t){return{x:t.x,y:t.y-1}},handleMove:function(t){t.y--}}:"down"===t?{handleArr:function(t){return t.filter((function(t){return t&&3!==t.y})).sort(c("y")).reverse()},handleCondition:function(t){return t.y<3},next:function(t){return{x:t.x,y:t.y+1}},handleMove:function(t){t.y++}}:void 0},turn:function(t){var n=this;this.rocks.forEach((function(t){return t&&(t.canCalc=!0)})),Promise.all(this.handleDirect(t).handleArr(this.rocks).filter((function(t){return t})).map(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=n.calcAxis({e:r,direct:t}),e.abrupt("return",i);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(t){if(t.indexOf(!0)>-1){if(n.isSuccess())return void n.$message.success("你真牛逼，你赢了，我服了");n.add()}else{if(n.isGameOver())return void n.$message.error("游戏结束请重新开始");if(n.isSuccess())return void n.$message.success("你真牛逼，你赢了，我服了")}setTimeout((function(){}),10)}))},mergeNumericBlockAddStyle:function(t){var n=document.querySelector("#r".concat(t.id));n&&n.animate&&n.animate([{transform:"scale(0.95)"},{transform:"scale(1.3)"},{transform:"scale(1.03)"},{transform:"scale(1)"}],{duration:200})},calcAxis:function(t){var n=this,e=t.e,r=t.direct;return new Promise(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(i,o){var c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(c=n.getRockByPoint(n.handleDirect(r).next(e)),!c||c.num===e.num){t.next=5;break}i(!1),t.next=19;break;case 5:if(!c||!c.canCalc||c.num!==e.num){t.next=18;break}return n.handleDirect(r).handleMove(e),c.num*=2,n.score+=e.num,c.canCalc=!1,c.color=n.color[c.num],n.mergeNumericBlockAddStyle(c),t.next=14,a(200);case 14:n.rocks.splice(n.getIndex(e.id),1,null),i(!0),t.next=19;break;case 18:void 0===c&&(n.handleDirect(r).handleCondition(e)&&(n.handleDirect(r).handleMove(e),n.calcAxis({e:e,direct:r})),i(!0));case 19:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}())}}},s=u,f=(e("f644"),e("cba8")),d=Object(f["a"])(s,r,i,!1,null,null,null);n["default"]=d.exports},"28fd":function(t,n,e){"use strict";var r=e("a5ba"),i=e("7c9e").filter,o=e("4718"),c=o("filter");r({target:"Array",proto:!0,forced:!c},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},4877:function(t,n,e){var r=e("eede"),i=r.match(/AppleWebKit\/(\d+)\./);t.exports=!!i&&+i[1]},"4c9f":function(t,n,e){},"59d7":function(t,n,e){"use strict";var r=e("a5ba"),i=e("7c9e").map,o=e("4718"),c=o("map");r({target:"Array",proto:!0,forced:!c},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},6249:function(t,n,e){"use strict";var r=e("a5ba"),i=e("7c9e").findIndex,o=e("12fa"),c="findIndex",a=!0;c in[]&&Array(1)[c]((function(){a=!1})),r({target:"Array",proto:!0,forced:a},{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o(c)},"6ba1":function(t,n,e){"use strict";var r=e("a5ba"),i=e("e7ec"),o=e("750a"),c=e("3493"),a=e("67e7"),u=e("78f8"),s=e("b68d"),f=e("04ba"),d=e("a3a6"),l=e("dee8"),h=e("a0c3"),v=e("8f74"),m=e("4877"),x=[],p=i(x.sort),y=i(x.push),g=s((function(){x.sort(void 0)})),b=s((function(){x.sort(null)})),k=d("sort"),w=!s((function(){if(v)return v<70;if(!(l&&l>3)){if(h)return!0;if(m)return m<603;var t,n,e,r,i="";for(t=65;t<76;t++){switch(n=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:e=3;break;case 68:case 71:e=4;break;default:e=2}for(r=0;r<47;r++)x.push({k:n+r,v:e})}for(x.sort((function(t,n){return n.v-t.v})),r=0;r<x.length;r++)n=x[r].k.charAt(0),i.charAt(i.length-1)!==n&&(i+=n);return"DGBEFHACIJK"!==i}})),A=g||!b||!k||!w,E=function(t){return function(n,e){return void 0===e?-1:void 0===n?1:void 0!==t?+t(n,e)||0:u(n)>u(e)?1:-1}};r({target:"Array",proto:!0,forced:A},{sort:function(t){void 0!==t&&o(t);var n=c(this);if(w)return void 0===t?p(n):p(n,t);var e,r,i=[],u=a(n);for(r=0;r<u;r++)r in n&&y(i,n[r]);f(i,E(t)),e=i.length,r=0;while(r<e)n[r]=i[r++];while(r<u)delete n[r++];return n}})},"6ead":function(t,n,e){"use strict";var r=e("7c9e").forEach,i=e("a3a6"),o=i("forEach");t.exports=o?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},"8d1b":function(t,n,e){"use strict";var r=e("a5ba"),i=e("c6da"),o=e("ccb5"),c=e("9332"),a=e("67e7"),u=e("3493"),s=e("c0fe"),f=e("c854"),d=e("4718"),l=d("splice"),h=i.TypeError,v=Math.max,m=Math.min,x=9007199254740991,p="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!l},{splice:function(t,n){var e,r,i,d,l,y,g=u(this),b=a(g),k=o(t,b),w=arguments.length;if(0===w?e=r=0:1===w?(e=0,r=b-k):(e=w-2,r=m(v(c(n),0),b-k)),b+e-r>x)throw h(p);for(i=s(g,r),d=0;d<r;d++)l=k+d,l in g&&f(i,d,g[l]);if(i.length=r,e<r){for(d=k;d<b-r;d++)l=d+r,y=d+e,l in g?g[y]=g[l]:delete g[y];for(d=b;d>b-r+e;d--)delete g[d-1]}else if(e>r)for(d=b-r;d>k;d--)l=d+r-1,y=d+e-1,l in g?g[y]=g[l]:delete g[y];for(d=0;d<e;d++)g[d+k]=arguments[d+2];return g.length=b-r+e,i}})},a0c3:function(t,n,e){var r=e("eede");t.exports=/MSIE|Trident/.test(r)},a3a6:function(t,n,e){"use strict";var r=e("b68d");t.exports=function(t,n){var e=[][t];return!!e&&r((function(){e.call(null,n||function(){throw 1},1)}))}},a9d5:function(t,n,e){"use strict";var r=e("a5ba"),i=e("7c9e").find,o=e("12fa"),c="find",a=!0;c in[]&&Array(1)[c]((function(){a=!1})),r({target:"Array",proto:!0,forced:a},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o(c)},aaa2:function(t,n,e){"use strict";var r=e("7faf"),i=e("7314"),o=e("16bc"),c=e("568e"),a=e("78f8"),u=e("41be"),s=e("0e65"),f=e("3975"),d=e("c64f");i("match",(function(t,n,e){return[function(n){var e=u(this),i=void 0==n?void 0:s(n,t);return i?r(i,n,e):new RegExp(n)[t](a(e))},function(t){var r=o(this),i=a(t),u=e(n,r,i);if(u.done)return u.value;if(!r.global)return d(r,i);var s=r.unicode;r.lastIndex=0;var l,h=[],v=0;while(null!==(l=d(r,i))){var m=a(l[0]);h[v]=m,""===m&&(r.lastIndex=f(i,c(r.lastIndex),s)),v++}return 0===v?null:h}]}))},c284:function(t,n,e){var r=e("c6da"),i=e("3ec5"),o=e("77bc"),c=e("6ead"),a=e("d28a"),u=function(t){if(t&&t.forEach!==c)try{a(t,"forEach",c)}catch(n){t.forEach=c}};for(var s in i)i[s]&&u(r[s]&&r[s].prototype);u(o)},dee8:function(t,n,e){var r=e("eede"),i=r.match(/firefox\/(\d+)/i);t.exports=!!i&&+i[1]},f644:function(t,n,e){"use strict";e("4c9f")}}]);