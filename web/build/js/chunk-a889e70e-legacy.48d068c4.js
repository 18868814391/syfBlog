(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a889e70e"],{"05ca":function(t,e,n){var a=n("c6da"),i=n("93a7"),r=n("8caa").UNSUPPORTED_Y,o=n("2b5b"),s=n("6f4d").f,c=n("11d9").get,l=RegExp.prototype,u=a.TypeError;i&&r&&s(l,"sticky",{configurable:!0,get:function(){if(this!==l){if("RegExp"===o(this))return!!c(this).sticky;throw u("Incompatible receiver, RegExp required")}}})},"28fd":function(t,e,n){"use strict";var a=n("a5ba"),i=n("7c9e").filter,r=n("4718"),o=r("filter");a({target:"Array",proto:!0,forced:!o},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},"2f57":function(t,e,n){var a=n("c6da"),i=n("93a7"),r=n("16fa"),o=n("2b5b"),s=n("6f4d").f,c=n("11d9").get,l=RegExp.prototype,u=a.TypeError;i&&r&&s(l,"dotAll",{configurable:!0,get:function(){if(this!==l){if("RegExp"===o(this))return!!c(this).dotAll;throw u("Incompatible receiver, RegExp required")}}})},"3bdf":function(t,e,n){"use strict";var a=n("e7ec"),i=n("1111").PROPER,r=n("a3e9"),o=n("16bc"),s=n("99a6"),c=n("78f8"),l=n("b68d"),u=n("3f3e"),h="toString",f=RegExp.prototype,d=f[h],g=a(u),v=l((function(){return"/a/b"!=d.call({source:"a",flags:"b"})})),p=i&&d.name!=h;(v||p)&&r(RegExp.prototype,h,(function(){var t=o(this),e=c(t.source),n=t.flags,a=c(void 0===n&&s(f,t)&&!("flags"in f)?g(t):n);return"/"+e+"/"+a}),{unsafe:!0})},"510e":function(t,e,n){"use strict";n("5503")},5215:function(t,e,n){"use strict";n.r(e);var a,i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"boob-page"},[n("div",{staticClass:"inner draw",on:{mousemove:function(e){return t.beginPath(e)}}},[n("div",{staticClass:"wrap"},[n("canvas",{staticClass:"fl",attrs:{id:"canvas",width:"600",height:"400"},on:{mousedown:function(e){return t.canvasDown(e)},mouseup:function(e){return t.canvasUp(e)},mousemove:function(e){return t.canvasMove(e)},touchstart:function(e){return t.canvasDown(e)},touchend:function(e){return t.canvasUp(e)},touchmove:function(e){return t.canvasMove(e)}}}),n("div",{staticClass:"fl",attrs:{id:"control"}},[n("div",{attrs:{id:"canvas-color"}},[n("h5",[t._v(" 画笔颜色")]),n("ul",t._l(t.colors,(function(e,a){return n("li",{key:a,class:{active:t.config.lineColor===e},style:{background:e},on:{click:function(n){return t.setColor(e)}}})})),0)]),n("div",{attrs:{id:"canvas-brush"}},[n("h5",[t._v("画笔大小")]),t._l(t.brushs,(function(e,a){return n("span",{key:a,class:[e.className,{active:t.config.lineWidth===e.lineWidth}],on:{click:function(n){return t.setBrush(e.lineWidth)}}},[t._v(t._s(e.name))])}))],2),n("div",{attrs:{id:"canvas-control"}},[n("h5",[t._v("操作")]),t._l(t.controls,(function(e,a){return n("span",{key:a,class:e.className,attrs:{title:e.title},on:{click:function(n){return t.controlCanvas(e.action)}}},[t._v(t._s(e.name))])}))],2),n("div",{attrs:{id:"canvas-drawImage"}},[n("h5",[t._v("生成图像")]),n("button",{staticClass:"drawImage",on:{click:function(e){return t.getImage()}}},[t._v("生成")])])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.imgUrl.length,expression:"imgUrl.length"}],attrs:{id:"img-box"}},t._l(t.imgUrl,(function(e,a){return n("div",{key:a,staticClass:"img-item"},[n("img",{attrs:{src:e}}),n("span",{staticClass:"fa fa-close",on:{click:function(n){return t.removeImg(e)}}})])})),0)]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.imgUrl.length,expression:"imgUrl.length"}],attrs:{id:"img-box2"}},t._l(t.imgUrl,(function(e,a){return n("div",{key:a,staticClass:"img-item22"},[n("button",{on:{click:function(n){return t.removeImg(e)}}},[t._v("移除")]),n("img",{attrs:{src:e}})])})),0),n("van-popup",{model:{value:t.show1,callback:function(e){t.show1=e},expression:"show1"}},[n("div",{staticClass:"poup1-con"},[n("div",[t._v("给你的大作起个名吧")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.upname,expression:"upname"}],attrs:{id:"",type:"text",name:""},domProps:{value:t.upname},on:{input:function(e){e.target.composing||(t.upname=e.target.value)}}}),n("div",{staticClass:"poup1-con-op"},[n("button",{on:{click:function(e){t.show1=!t.show1}}},[t._v("取消")]),n("button",{on:{click:function(e){t.show1=!t.show1,t.show2=!0}}},[t._v("确认")])])])]),n("van-popup",{model:{value:t.show2,callback:function(e){t.show2=e},expression:"show2"}},[n("div",{staticClass:"poup1-con"},[n("div",[t._v("来一句介绍吧")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.upmsg,expression:"upmsg"}],attrs:{id:"",type:"text",name:""},domProps:{value:t.upmsg},on:{input:function(e){e.target.composing||(t.upmsg=e.target.value)}}}),n("div",{staticClass:"poup1-con-op"},[n("button",{on:{click:function(e){t.show2=!t.show2}}},[t._v("取消")]),n("button",{on:{click:function(e){return t.prepre()}}},[t._v("确认")])])])]),n("div",{staticClass:"others"},[n("button",{on:{click:t.goMore}},[t._v("查看更多")])])],1)},r=[],o=n("724c"),s=(n("9cd1"),n("fd65")),c=(n("22ec"),n("bf33")),l=(n("3e22"),n("28fd"),n("a9b6"),n("44ad"),n("3fab"),n("ed02"),n("8c44"),n("2f57"),n("05ca"),n("3bdf"),n("89cf"),n("aaa2"),n("caaf")),u=n.n(l),h=n("365c"),f={components:(a={},Object(o["a"])(a,c["a"].name,c["a"]),Object(o["a"])(a,s["a"].name,s["a"]),a),data:function(){return{show1:!1,show2:!1,upImg:"",upname:"",upmsg:"",colors:["#fef4ac","#0018ba","#ffc200","#f32f15","#cccccc","#5ab639"],brushs:[{className:"small fa fa-paint-brush",lineWidth:3,name:"细"},{className:"middle fa fa-paint-brush",lineWidth:6,name:"中"},{className:"big fa fa-paint-brush",lineWidth:12,name:"粗"}],context:{},imgUrl:[],canvasMoveUse:!0,preDrawAry:[],nextDrawAry:[],middleAry:[],config:{lineWidth:1,lineColor:"#f2849e",shadowBlur:2}}},computed:{controls:function(){return[{title:"上一步",action:"prev",className:this.preDrawAry.length?"active fa fa-reply":"fa fa-reply",name:"prev"},{title:"下一步",action:"next",className:this.nextDrawAry.length?"active fa fa-share":"fa fa-share",name:"next"},{title:"清除",action:"clear",className:this.preDrawAry.length||this.nextDrawAry.length?"active fa fa-trash":"fa fa-trash",name:"clear"}]}},created:function(){this.$emit("setNav","在线涂鸦画板")},mounted:function(){var t=document.querySelector("#canvas");this.context=t.getContext("2d"),this.initDraw(),this.setCanvasStyle(),document.querySelector("#footer").classList.add("hide-footer"),document.querySelector("body").classList.add("fix-body")},destroyed:function(){document.querySelector("#footer").classList.remove("hide-footer"),document.querySelector("body").classList.remove("fix-body")},methods:{goMore:function(){this.$router.push({path:"/boobMore"})},isPc:function(){for(var t=navigator.userAgent,e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],n=!0,a=0;a<e.length;a++)if(t.indexOf(e[a])>0){n=!1;break}return n},removeImg:function(t){this.imgUrl=this.imgUrl.filter((function(e){return e!==t}))},initDraw:function(){var t=this.context.getImageData(0,0,600,400);this.middleAry.push(t)},canvasMove:function(t){if(this.canvasMoveUse){console.log("canvasMove");var e,n,a=t.target;this.isPc()?(e=t.clientX-a.parentNode.offsetLeft,n=t.clientY-a.parentNode.offsetTop):(e=t.changedTouches[0].clientX-a.parentNode.offsetLeft,n=t.changedTouches[0].clientY-a.parentNode.offsetTop),this.context.lineTo(e,n),this.context.stroke()}},beginPath:function(t){var e=document.querySelector("#canvas");t.target!==e&&(console.log("beginPath"),this.context.beginPath())},canvasUp:function(t){console.log("canvasUp");var e=this.context.getImageData(0,0,600,400);this.nextDrawAry.length?(this.middleAry=[],this.middleAry=this.middleAry.concat(this.preDrawAry),this.middleAry.push(e),this.nextDrawAry=[]):this.middleAry.push(e),this.canvasMoveUse=!1},canvasDown:function(t){console.log("canvasDown"),this.canvasMoveUse=!0;var e=t.clientX-t.target.parentNode.offsetLeft,n=t.clientY-t.target.parentNode.offsetTop;this.setCanvasStyle(),this.context.beginPath(),this.context.moveTo(e,n),console.log("moveTo",e,n);var a=this.context.getImageData(0,0,600,400);this.preDrawAry.push(a)},setColor:function(t){this.config.lineColor=t},setBrush:function(t){this.config.lineWidth=t},controlCanvas:function(t){switch(t){case"prev":if(this.preDrawAry.length){var e=this.preDrawAry.pop(),n=this.middleAry[this.preDrawAry.length+1];this.nextDrawAry.push(n),this.context.putImageData(e,0,0)}break;case"next":if(this.nextDrawAry.length){var a=this.nextDrawAry.pop(),i=this.middleAry[this.middleAry.length-this.nextDrawAry.length-2];this.preDrawAry.push(i),this.context.putImageData(a,0,0)}break;case"clear":this.context.clearRect(0,0,this.context.canvas.width,this.context.canvas.height),this.preDrawAry=[],this.nextDrawAry=[],this.middleAry=[this.middleAry[0]];break}},getImage:function(){var t=this;c["a"].loading({mask:!0,message:"处理中..."});var e=document.querySelector("#canvas"),n=e.toDataURL("image/png");console.log(n),this.imgUrl.push(n),this.compress(n,150,.5).then((function(e){c["a"].clear(),console.log(e);var n=e;t.upImg=n.replace(new RegExp("\\+","g"),"%2B"),t.show1=!0}))},prepre:function(){this.uploadImg()},uploadImg:function(){var t=this,e=u()().format("MMMM Do YYYY, h:mm:ss a");c["a"].loading({mask:!0,message:"提交中..."}),Object(h["q"])({content:t.upImg,msg:t.upmsg,Thename:t.upname,updataTime:e}).then((function(e){c["a"].clear(),t.show2=!1,0==e.data.errcode&&(Object(c["a"])("已经上传好了。我留下了。"),t.controlCanvas("clear"))})).catch((function(t){c["a"].clear()}))},setCanvasStyle:function(){this.context.lineWidth=this.config.lineWidth,this.context.shadowBlur=this.config.shadowBlur,this.context.shadowColor=this.config.lineColor,this.context.strokeStyle=this.config.lineColor},compress:function(t,e,n){var a,i,r=function(t){var e=t.split(","),n=e[0].match(/:(.*?);/)[1];return n},o=new Image,s=new Promise((function(t){return o.onload=t}));return o.src=t,s.then((function(){a=o.width,i=o.height;var s=document.createElement("canvas"),c=s.getContext("2d");Math.max(a,i)>e?a>i?(s.width=e,s.height=e*i/a):(s.height=e,s.width=e*a/i):(s.width=a,s.height=i),c.clearRect(0,0,s.width,s.height),c.drawImage(o,0,0,s.width,s.height);var l=s.toDataURL(r(t),n);return l}))}}},d=f,g=(n("510e"),n("cba8")),v=Object(g["a"])(d,i,r,!1,null,null,null);e["default"]=v.exports},5503:function(t,e,n){},"89cf":function(t,e,n){"use strict";var a=n("c3fb"),i=n("7faf"),r=n("e7ec"),o=n("7314"),s=n("4d08"),c=n("16bc"),l=n("41be"),u=n("4228"),h=n("3975"),f=n("568e"),d=n("78f8"),g=n("0e65"),v=n("9535"),p=n("c64f"),m=n("ba60"),w=n("8caa"),b=n("b68d"),x=w.UNSUPPORTED_Y,y=4294967295,A=Math.min,k=[].push,D=r(/./.exec),C=r(k),I=r("".slice),_=!b((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));o("split",(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=d(l(this)),o=void 0===n?y:n>>>0;if(0===o)return[];if(void 0===t)return[r];if(!s(t))return i(e,r,t,o);var c,u,h,f=[],g=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,w=new RegExp(t.source,g+"g");while(c=i(m,w,r)){if(u=w.lastIndex,u>p&&(C(f,I(r,p,c.index)),c.length>1&&c.index<r.length&&a(k,f,v(c,1)),h=c[0].length,p=u,f.length>=o))break;w.lastIndex===c.index&&w.lastIndex++}return p===r.length?!h&&D(w,"")||C(f,""):C(f,I(r,p)),f.length>o?v(f,0,o):f}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:i(e,this,t,n)}:e,[function(e,n){var a=l(this),o=void 0==e?void 0:g(e,t);return o?i(o,e,a,n):i(r,d(a),e,n)},function(t,a){var i=c(this),o=d(t),s=n(r,i,o,a,r!==e);if(s.done)return s.value;var l=u(i,RegExp),g=i.unicode,v=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(x?"g":"y"),m=new l(x?"^(?:"+i.source+")":i,v),w=void 0===a?y:a>>>0;if(0===w)return[];if(0===o.length)return null===p(m,o)?[o]:[];var b=0,k=0,D=[];while(k<o.length){m.lastIndex=x?0:k;var _,U=p(m,x?I(o,k):o);if(null===U||(_=A(f(m.lastIndex+(x?k:0)),o.length))===b)k=h(o,k,g);else{if(C(D,I(o,b,k)),D.length===w)return D;for(var E=1;E<=U.length-1;E++)if(C(D,U[E]),D.length===w)return D;k=b=_}}return C(D,I(o,b)),D}]}),!_,x)},"8c44":function(t,e,n){var a=n("93a7"),i=n("c6da"),r=n("e7ec"),o=n("4aee"),s=n("64b7"),c=n("d28a"),l=n("6f4d").f,u=n("1b92").f,h=n("99a6"),f=n("4d08"),d=n("78f8"),g=n("3f3e"),v=n("8caa"),p=n("a3e9"),m=n("b68d"),w=n("12ed"),b=n("11d9").enforce,x=n("3ce7"),y=n("d442"),A=n("16fa"),k=n("02cf"),D=y("match"),C=i.RegExp,I=C.prototype,_=i.SyntaxError,U=r(g),E=r(I.exec),R=r("".charAt),N=r("".replace),P=r("".indexOf),S=r("".slice),M=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,T=/a/g,O=/a/g,W=new C(T)!==T,q=v.UNSUPPORTED_Y,Y=a&&(!W||q||A||k||m((function(){return O[D]=!1,C(T)!=T||C(O)==O||"/a/i"!=C(T,"i")}))),L=function(t){for(var e,n=t.length,a=0,i="",r=!1;a<=n;a++)e=R(t,a),"\\"!==e?r||"."!==e?("["===e?r=!0:"]"===e&&(r=!1),i+=e):i+="[\\s\\S]":i+=e+R(t,++a);return i},B=function(t){for(var e,n=t.length,a=0,i="",r=[],o={},s=!1,c=!1,l=0,u="";a<=n;a++){if(e=R(t,a),"\\"===e)e+=R(t,++a);else if("]"===e)s=!1;else if(!s)switch(!0){case"["===e:s=!0;break;case"("===e:E(M,S(t,a+1))&&(a+=2,c=!0),i+=e,l++;continue;case">"===e&&c:if(""===u||w(o,u))throw new _("Invalid capture group name");o[u]=!0,r[r.length]=[u,l],c=!1,u="";continue}c?u+=e:i+=e}return[i,r]};if(o("RegExp",Y)){for(var j=function(t,e){var n,a,i,r,o,l,u=h(I,this),g=f(t),v=void 0===e,p=[],m=t;if(!u&&g&&v&&t.constructor===j)return t;if((g||h(I,t))&&(t=t.source,v&&(e="flags"in m?m.flags:U(m))),t=void 0===t?"":d(t),e=void 0===e?"":d(e),m=t,A&&"dotAll"in T&&(a=!!e&&P(e,"s")>-1,a&&(e=N(e,/s/g,""))),n=e,q&&"sticky"in T&&(i=!!e&&P(e,"y")>-1,i&&(e=N(e,/y/g,""))),k&&(r=B(t),t=r[0],p=r[1]),o=s(C(t,e),u?this:I,j),(a||i||p.length)&&(l=b(o),a&&(l.dotAll=!0,l.raw=j(L(t),n)),i&&(l.sticky=!0),p.length&&(l.groups=p)),t!==m)try{c(o,"source",""===m?"(?:)":m)}catch(w){}return o},X=function(t){t in j||l(j,t,{configurable:!0,get:function(){return C[t]},set:function(e){C[t]=e}})},$=u(C),J=0;$.length>J;)X($[J++]);I.constructor=j,j.prototype=I,p(i,"RegExp",j)}x("RegExp")},aaa2:function(t,e,n){"use strict";var a=n("7faf"),i=n("7314"),r=n("16bc"),o=n("568e"),s=n("78f8"),c=n("41be"),l=n("0e65"),u=n("3975"),h=n("c64f");i("match",(function(t,e,n){return[function(e){var n=c(this),i=void 0==e?void 0:l(e,t);return i?a(i,e,n):new RegExp(e)[t](s(n))},function(t){var a=r(this),i=s(t),c=n(e,a,i);if(c.done)return c.value;if(!a.global)return h(a,i);var l=a.unicode;a.lastIndex=0;var f,d=[],g=0;while(null!==(f=h(a,i))){var v=s(f[0]);d[g]=v,""===v&&(a.lastIndex=u(i,o(a.lastIndex),l)),g++}return 0===g?null:d}]}))}}]);