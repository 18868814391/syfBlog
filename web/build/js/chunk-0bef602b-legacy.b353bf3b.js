(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0bef602b"],{"04ba":function(n,t,e){var r=e("9535"),i=Math.floor,o=function(n,t){var e=n.length,u=i(e/2);return e<8?c(n,t):a(n,o(r(n,0,u),t),o(r(n,u),t),t)},c=function(n,t){var e,r,i=n.length,o=1;while(o<i){r=o,e=n[o];while(r&&t(n[r-1],e)>0)n[r]=n[--r];r!==o++&&(n[r]=e)}return n},a=function(n,t,e,r){var i=t.length,o=e.length,c=0,a=0;while(c<i||a<o)n[c+a]=c<i&&a<o?r(t[c],e[a])<=0?t[c++]:e[a++]:c<i?t[c++]:e[a++];return n};n.exports=o},"151d":function(n,t,e){"use strict";e.r(t);var r=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"layout"},[e("header",[e("span",{staticClass:"score"},[n._v("总分："+n._s(n.score))]),e("button",{staticClass:"star",on:{click:n.init}},[n._v("开始新的游戏")]),e("span",{staticClass:"sd"})]),e("div",{staticClass:"all-container"},[e("div",{staticClass:"background"},n._l(16,(function(n){return e("span")})),0),e("div",{staticClass:"container"},n._l(n.rocks,(function(t,r){return t?e("span",{key:r,staticClass:"list",style:"\n          zIndex: "+(t?t.num:0)+";\n          transform: translate("+n.cssTransition(t)+");\n        "},[e("span",{staticClass:"inner",style:"backgroundColor: "+(t?t.color:""),attrs:{id:"r"+(t&&t.id)}},[n._v(" "+n._s(t?t.num:"")+" ")])]):n._e()})),0)])])},i=[],o=e("ed3b"),c=(e("e186"),e("a9b6"),e("3fab"),e("aaa2"),e("44ad"),e("a9d5"),e("28fd"),e("6249"),e("6ba1"),e("c284"),e("2690"),e("d4f9"),e("59d7"),e("8d1b"),function(n){return function(t,e){var r=t[n],i=e[n];return r<i?-1:1}}),a=function(n){return new Promise((function(t){return setTimeout(t,n)}))},u={data:function(){return{msg:"",score:0,rocks:[],color:{2:"#eee4da",4:"#ede0c8",8:"#f2b179",16:"#f59563",32:"#f67c5f",64:"#f65e3b",128:"#edcf72",256:"#edcc61",512:"#0444BF",1024:"#A79674",2048:"#282726",4096:"#280b21",8192:"#281d04"},directX:30}},mounted:function(){var n=this;window.app=this,this.init(),document.addEventListener("keydown",(function(t){switch(t.key.toLocaleUpperCase()){case"ARROWRIGHT":case"D":n.turn("right");break;case"ARROWLEFT":case"A":n.turn("left");break;case"ARROWDOWN":case"S":n.turn("down");break;case"ARROWUP":case"W":n.turn("up");break}})),document.addEventListener("touchstart",(function(t){var e=function e(r){r&&r.preventDefault();var i=r.touches[0].clientX-t.touches[0].clientX,o=r.touches[0].clientY-t.touches[0].clientY;i>n.directX?(n.turn("right"),document.removeEventListener("touchmove",e)):i<-n.directX?(n.turn("left"),document.removeEventListener("touchmove",e)):o>n.directX?(n.turn("down"),document.removeEventListener("touchmove",e)):o<-n.directX&&(n.turn("up"),document.removeEventListener("touchmove",e))};document.addEventListener("touchmove",e),document.addEventListener("touchend",(function(){document.removeEventListener("touchmove",e)}))}))},methods:{isMobile:function(){return window.navigator.userAgent.match(/Mobile/)},cssTransition:function(n){return this.isMobile()?"".concat(23.5*(n?n.x:0),"vw, ").concat(23.5*(n?n.y:0),"vw"):"".concat(120*(n?n.x:0),"px, ").concat(120*(n?n.y:0),"px")},init:function(){this.score=0,this.initRocks()},initRocks:function(){this.rocks=[],this.add(),this.add()},random24:function(){return Math.random()>.9?4:2},random0123:function(){return~~(4*Math.random())},createRock:function(){var n=this.random24(),t={x:this.random0123(),y:this.random0123(),num:n,id:this.rocks.length+1,color:this.color[n]},e=this.getRockByPoint({x:t.x,y:t.y});return e?this.createRock():t},isGameOver:function(){var n=this,t=this.isFull()&&this.rocks.filter((function(n){return n&&(3!==n.x||3!==n.y)})).find((function(t){var e=n.getRockByPoint({x:t.x+1,y:t.y}),r=n.getRockByPoint({x:t.x,y:t.y+1});return t.num===(e&&e.num)||t.num===(r&&r.num)}));return void 0===t},isSuccess:function(){var n=this.rocks.find((function(n){return n&&8192===n.num}));return void 0!==n},isFull:function(){return this.rocks.filter((function(n){return n})).length>15},add:function(){if(this.isFull())return!1;var n=this.createRock();this.rocks.push(n)},getRockByPoint:function(n){var t=n.x,e=n.y;return this.rocks.filter((function(n){return n})).find((function(n){return n.x===t&&n.y===e}))},getIndex:function(n){return this.rocks.findIndex((function(t){return t&&t.id===n}))},handleDirect:function(n){return"right"===n?{handleArr:function(n){return n.filter((function(n){return n&&3!==n.x})).sort(c("x")).reverse()},handleCondition:function(n){return n.x<3},next:function(n){return{x:n.x+1,y:n.y}},handleMove:function(n){return n.x++}}:"left"===n?{handleArr:function(n){return n.filter((function(n){return n&&0!==n.x})).sort(c("x"))},handleCondition:function(n){return n.x>0},next:function(n){return{x:n.x-1,y:n.y}},handleMove:function(n){n.x--}}:"up"===n?{handleArr:function(n){return n.filter((function(n){return n&&0!==n.y})).sort(c("y"))},handleCondition:function(n){return n.y>0},next:function(n){return{x:n.x,y:n.y-1}},handleMove:function(n){n.y--}}:"down"===n?{handleArr:function(n){return n.filter((function(n){return n&&3!==n.y})).sort(c("y")).reverse()},handleCondition:function(n){return n.y<3},next:function(n){return{x:n.x,y:n.y+1}},handleMove:function(n){n.y++}}:void 0},turn:function(n){var t=this;this.rocks.forEach((function(n){return n&&(n.canCalc=!0)})),Promise.all(this.handleDirect(n).handleArr(this.rocks).filter((function(n){return n})).map(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.calcAxis({e:r,direct:n}),e.abrupt("return",i);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())).then((function(n){if(n.indexOf(!0)>-1){if(t.isSuccess())return void t.$message.success("你真牛逼，你赢了，我服了");t.add()}else{if(t.isGameOver())return void t.$message.error("游戏结束请重新开始");if(t.isSuccess())return void t.$message.success("你真牛逼，你赢了，我服了")}setTimeout((function(){}),10)}))},mergeNumericBlockAddStyle:function(n){var t=document.querySelector("#r".concat(n.id));t.animate([{transform:"scale(0.95)"},{transform:"scale(1.3)"},{transform:"scale(1.03)"},{transform:"scale(1)"}],{duration:200})},calcAxis:function(n){var t=this,e=n.e,r=n.direct;return new Promise(function(){var n=Object(o["a"])(regeneratorRuntime.mark((function n(i,o){var c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(c=t.getRockByPoint(t.handleDirect(r).next(e)),!c||c.num===e.num){n.next=5;break}i(!1),n.next=19;break;case 5:if(!c||!c.canCalc||c.num!==e.num){n.next=18;break}return t.handleDirect(r).handleMove(e),c.num*=2,t.score+=e.num,c.canCalc=!1,c.color=t.color[c.num],t.mergeNumericBlockAddStyle(c),n.next=14,a(200);case 14:t.rocks.splice(t.getIndex(e.id),1,null),i(!0),n.next=19;break;case 18:void 0===c&&(t.handleDirect(r).handleCondition(e)&&(t.handleDirect(r).handleMove(e),t.calcAxis({e:e,direct:r})),i(!0));case 19:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}())}}},s=u,f=(e("f644"),e("cba8")),d=Object(f["a"])(s,r,i,!1,null,null,null);t["default"]=d.exports},"28fd":function(n,t,e){"use strict";var r=e("a5ba"),i=e("7c9e").filter,o=e("4718"),c=o("filter");r({target:"Array",proto:!0,forced:!c},{filter:function(n){return i(this,n,arguments.length>1?arguments[1]:void 0)}})},4877:function(n,t,e){var r=e("eede"),i=r.match(/AppleWebKit\/(\d+)\./);n.exports=!!i&&+i[1]},"4c9f":function(n,t,e){},"59d7":function(n,t,e){"use strict";var r=e("a5ba"),i=e("7c9e").map,o=e("4718"),c=o("map");r({target:"Array",proto:!0,forced:!c},{map:function(n){return i(this,n,arguments.length>1?arguments[1]:void 0)}})},6249:function(n,t,e){"use strict";var r=e("a5ba"),i=e("7c9e").findIndex,o=e("12fa"),c="findIndex",a=!0;c in[]&&Array(1)[c]((function(){a=!1})),r({target:"Array",proto:!0,forced:a},{findIndex:function(n){return i(this,n,arguments.length>1?arguments[1]:void 0)}}),o(c)},"6ba1":function(n,t,e){"use strict";var r=e("a5ba"),i=e("e7ec"),o=e("750a"),c=e("3493"),a=e("67e7"),u=e("78f8"),s=e("b68d"),f=e("04ba"),d=e("a3a6"),l=e("dee8"),h=e("a0c3"),v=e("8f74"),m=e("4877"),x=[],p=i(x.sort),y=i(x.push),b=s((function(){x.sort(void 0)})),g=s((function(){x.sort(null)})),k=d("sort"),w=!s((function(){if(v)return v<70;if(!(l&&l>3)){if(h)return!0;if(m)return m<603;var n,t,e,r,i="";for(n=65;n<76;n++){switch(t=String.fromCharCode(n),n){case 66:case 69:case 70:case 72:e=3;break;case 68:case 71:e=4;break;default:e=2}for(r=0;r<47;r++)x.push({k:t+r,v:e})}for(x.sort((function(n,t){return t.v-n.v})),r=0;r<x.length;r++)t=x[r].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}})),A=b||!g||!k||!w,R=function(n){return function(t,e){return void 0===e?-1:void 0===t?1:void 0!==n?+n(t,e)||0:u(t)>u(e)?1:-1}};r({target:"Array",proto:!0,forced:A},{sort:function(n){void 0!==n&&o(n);var t=c(this);if(w)return void 0===n?p(t):p(t,n);var e,r,i=[],u=a(t);for(r=0;r<u;r++)r in t&&y(i,t[r]);f(i,R(n)),e=i.length,r=0;while(r<e)t[r]=i[r++];while(r<u)delete t[r++];return t}})},"6ead":function(n,t,e){"use strict";var r=e("7c9e").forEach,i=e("a3a6"),o=i("forEach");n.exports=o?[].forEach:function(n){return r(this,n,arguments.length>1?arguments[1]:void 0)}},"8d1b":function(n,t,e){"use strict";var r=e("a5ba"),i=e("c6da"),o=e("ccb5"),c=e("9332"),a=e("67e7"),u=e("3493"),s=e("c0fe"),f=e("c854"),d=e("4718"),l=d("splice"),h=i.TypeError,v=Math.max,m=Math.min,x=9007199254740991,p="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!l},{splice:function(n,t){var e,r,i,d,l,y,b=u(this),g=a(b),k=o(n,g),w=arguments.length;if(0===w?e=r=0:1===w?(e=0,r=g-k):(e=w-2,r=m(v(c(t),0),g-k)),g+e-r>x)throw h(p);for(i=s(b,r),d=0;d<r;d++)l=k+d,l in b&&f(i,d,b[l]);if(i.length=r,e<r){for(d=k;d<g-r;d++)l=d+r,y=d+e,l in b?b[y]=b[l]:delete b[y];for(d=g;d>g-r+e;d--)delete b[d-1]}else if(e>r)for(d=g-r;d>k;d--)l=d+r-1,y=d+e-1,l in b?b[y]=b[l]:delete b[y];for(d=0;d<e;d++)b[d+k]=arguments[d+2];return b.length=g-r+e,i}})},a0c3:function(n,t,e){var r=e("eede");n.exports=/MSIE|Trident/.test(r)},a3a6:function(n,t,e){"use strict";var r=e("b68d");n.exports=function(n,t){var e=[][n];return!!e&&r((function(){e.call(null,t||function(){throw 1},1)}))}},a9d5:function(n,t,e){"use strict";var r=e("a5ba"),i=e("7c9e").find,o=e("12fa"),c="find",a=!0;c in[]&&Array(1)[c]((function(){a=!1})),r({target:"Array",proto:!0,forced:a},{find:function(n){return i(this,n,arguments.length>1?arguments[1]:void 0)}}),o(c)},aaa2:function(n,t,e){"use strict";var r=e("7faf"),i=e("7314"),o=e("16bc"),c=e("568e"),a=e("78f8"),u=e("41be"),s=e("0e65"),f=e("3975"),d=e("c64f");i("match",(function(n,t,e){return[function(t){var e=u(this),i=void 0==t?void 0:s(t,n);return i?r(i,t,e):new RegExp(t)[n](a(e))},function(n){var r=o(this),i=a(n),u=e(t,r,i);if(u.done)return u.value;if(!r.global)return d(r,i);var s=r.unicode;r.lastIndex=0;var l,h=[],v=0;while(null!==(l=d(r,i))){var m=a(l[0]);h[v]=m,""===m&&(r.lastIndex=f(i,c(r.lastIndex),s)),v++}return 0===v?null:h}]}))},c284:function(n,t,e){var r=e("c6da"),i=e("3ec5"),o=e("77bc"),c=e("6ead"),a=e("d28a"),u=function(n){if(n&&n.forEach!==c)try{a(n,"forEach",c)}catch(t){n.forEach=c}};for(var s in i)i[s]&&u(r[s]&&r[s].prototype);u(o)},dee8:function(n,t,e){var r=e("eede"),i=r.match(/firefox\/(\d+)/i);n.exports=!!i&&+i[1]},f644:function(n,t,e){"use strict";e("4c9f")}}]);